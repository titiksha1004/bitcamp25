<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Make a Call with Twilio + JavaScript</title>
</head>
<body>
  <button id="callBtn">Call Now</button>

  <script>
    // WARNING: For demo purposes only. Don't expose real credentials in production.
    const accountSid  = "AC317f3daf20e425f911c64841028c164b";  // e.g., "ACxxxxxxxxxxxxxxxxxxxx"
    const authToken   = "971d7f01c38d1ae34c5ed6363299a32b";   // e.g., "123abc456def..."
    const fromNumber  = "+19472175415";       // Twilio voice-capable number
    const toNumber    = "+16092976126";       // Recipient phone number
    const twimlUrl    = "http://demo.twilio.com/docs/voice.xml"; 
    // or your own public URL returning TwiML.

    document.getElementById('callBtn').addEventListener('click', async () => {
      try {
        // Build the form data for a Twilio Voice call
        const bodyData = new URLSearchParams();
        bodyData.append("From", fromNumber);
        bodyData.append("To", toNumber);
        bodyData.append("Url", twimlUrl);

        // Make the API request
        const response = await fetch(
          `https://api.twilio.com/2010-04-01/Accounts/${accountSid}/Calls.json`,
          {
            method: "POST",
            headers: {
              "Authorization": "Basic " + btoa(accountSid + ":" + authToken),
              "Content-Type": "application/x-www-form-urlencoded"
            },
            body: bodyData.toString()
          }
        );

        if (!response.ok) {
          throw new Error(`HTTP Error! Status: ${response.status}`);
        }

        const result = await response.json();
        console.log("Call SID:", result.sid);
        alert("Call initiated! Check console for SID.");
      } catch (error) {
        console.error("Error making call:", error);
        alert("Failed to initiate call. Check console for details.");
      }
    });
  </script>
</body>
</html>
